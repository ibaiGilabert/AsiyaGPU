Build Asiya:

	$qlogin		//S'ha de construir en un node de còmput.
	$bash
	$make

Generate .o:

	$g++ -c Common.cpp
	$g++ -c Asiya.cpp


Link and generate executable:

	$g++ -o Asiya Asiya.o Common.o


Linking Reference bin libraries:

	#include <boost/regex.hpp>				->		-lboos_regex
	#include <boost/filesystem.hpp>			->		-lboost_system -lboost_filesystem


DEBUGGING

	Afegir -ggdb al Makefile

	$gdb Asiya
	>run (entrada)


XML PARSER

	Install:

		$apt-get intall libxml2-dev

	Compile:

		$g++ libxml.cpp -o libxml -lxml2 -I/usr/include/libxml2


	EXEMPLE useful de construcció del document xml: writer_newxml.cpp



AXIOMES:

	undef de perl és equivalent a -1

	extract xml.gz	->	$gunzip file


REVISAR:

	Config.cpp -> Obtenció de "SYSTEM" del fitxer de configuració. (sub process_config_file)

	Config.cpp -> Les funcions process_nist_file i process_raw_file estan incompletes. (dependència NISTXML.pm)

	Config.cpp -> sizes dels scalar(rIDX) (el sospitós -1)

	Core.cpp -> Creació de la TSDatabase (do_score)

	Scores.cpp -> La puntuació de l'atribut "all" de scores és -1 en comptes de {} en l'original %hOQ.

	Core.cpp ->	HREF pot ser un hash multiple (del(s?) references files)

	Config.cpp	->	validate_configuration inacabat

	BLEUNIST.cpp	->	NO fa servir hOQ, es passa el paràmetre només per complir l'herència.

	IQXML.cpp	->	La precissió amb la que s'escriuren els xml's no és la indicada a la llibreria.

	IQXML.cpp	->	En la definició del !DOCTYPE, hi ha el '[]' dins de les "'s.

	NISTXML		->	falta el repair_file a la funcio read_file (llegir nist).

	Common.cpp	->	safe_division incomplet (sense default)

	Config.cpp	->	Si el format d'entrada és nist, més val que estigui ben formatad perquè nosaltres no "reparem" fitxers.

	GENERAL		->	El seed del rand s'hauria de declarar una UNICA vegada a metrics, i no a cada mètrica.

	NISTXML.cpp	->	El FileInfo wc SERVEIX¿?

	SC_RAW		->	Els prints_scores no contenen la part TEX.

SHORTCUTS

	-->IF file exists
	#include <boost/filesystem.hpp>

	  boost::filesystem::path p (TOOLS);   // p reads clearer than argv[1] in the following code

	  if (exists(p))    // does p actually exist?
	  {
	    if (is_regular_file(p))        // is p a regular file?
	      cout << p << " size is " << file_size(p) << '\n';

	    else if (is_directory(p))      // is p a directory?
   		   cout << p << " is a directory\n";

   	-->CURRENT PATH

   		boost::filesystem::path path( boost::filesystem::current_path() );
		std::cout << "Current path is : " << path << std::endl;

	-->DIRNAME
		#include <libgen.h>
		dirname(char*)

		//equivalent to $dir = dirname($XML);

	-->SPLIT string

    boost::regex reeq(" ");
    boost::sregex_token_iterator i(entry.second.begin(), entry.second.end(), reeq, -1);
    boost::sregex_token_iterator j;
    while (i != j) {
        Config::systems.insert(*i++);
    }

    	//MILLOR ALTERNATIVA

    	#include <boost/algorithm/string.hpp>
		std::vector<std::string> strs;
		boost::split(strs, "string to split", boost::is_any_of("\t "));

		//ALTRA ALTERNATIVA (amb istringstream)

    	std::string s = "Hello How Are You Today Man";
	    std::vector<std::string> v;
	    std::istringstream buf(s);
	    for(std::string token; getline(buf, token, ' '); )
	        v.push_back(token);

	-->	MATCH DE CARACTERS ESPECIALS	(joc de proves a sandbox/boost_replace.cc)
	    re = ("\\*");   report_xml = boost::regex_replace(report_xml, re, "\\\\*");
	    re = (";");     report_xml = boost::regex_replace(report_xml, re, "\\\\;");
	    re = ("`");     report_xml = boost::regex_replace(report_xml, re, "\\\\`");
	    re = ("'");     report_xml = boost::regex_replace(report_xml, re, "\\\\'");
	    re = ("\\(");   report_xml = boost::regex_replace(report_xml, re, "\\\\(");
	    re = ("\\)");   report_xml = boost::regex_replace(report_xml, re, "\\\\)");
	    re = ("\\?");   report_xml = boost::regex_replace(report_xml, re, "\\\\?");

	--> DELETE SPACE PADING
	        boost::regex re("\\s*$");//, boost::regex::perl|boost::regex::icase);
	        boost::regex re2("^\\s*");//, boost::regex::perl|boost::regex::icase);

	        type = boost::regex_replace(type, re, "");
	        data = boost::regex_replace(data, re2, "");

	-->	#include<omp.h> requires -lgomp


TODO LIST

	-	LOCAL
				->	Els xMaps estan aixi aixi. S'ha de canviar l'estructura de dades.

				->	Completar l'ESA (test de expressions regulars a regular_exp.pl)	(verificar els tipus de computeMultiESA)
				->	Completar el NGRAM.
				->	Completar el CE.

	-	CLUSTER
				->	La versio C++ guarda la mateixa referencia moltes vegades per cada metrica/sistema.
					Executa PROVA_MMATRIX/AsiyaGPU/sample i mira la sortida
					Comparar amb la versio perl. (estava printant pel print_system_scores_MMATRIX) a sample/samples-nist

				->	Comprovar de nou el done-list amb les noves modificacions de les metriques.
				->	Provar els METEOR/ESA (Asiya.config).
				->	Provar el GTM	(nova versio de NISTXML amb SGML_GTM_create_doc)
				->	Provar el TER
				->	Provar el WER

		NOTES: (execucions al cluster)
				->	Canviar el path del tools a Config.cpp
				->	Canviar el data_path del fitxer d'entrada Asiya.config al directori actual (pwd).
				->	Si s'executa interactivament (qlogin) ha de ser en bash.


DONE LIST

	->	BLEU, NIST, BLEUNIST, ROUGE;	resultats escirts correctament.


QUESTIONS

	->	Al executar el gtm-1.4 tinc aquests problemes

		$java -Dfile.encoding=UTF-8 -jar /home/soft/asiya/tools/gtm-1.4/gtm.jar +s +d

			Picked up _JAVA_OPTIONS: -Xmx2048M
			Could not create the Java virtual machine.
			[ERROR] problems running GTM...

		En una execució interactiva amb qlogin no puc crear la màquina virtual de java.

	->	Al executar el TER tinc problemes (crec que els mateixos que el gtm)

		Picked up _JAVA_OPTIONS: -Xmx2048M
		Error occurred during initialization of VM
		Could not reserve enough space for object heap
		Could not create the Java virtual machine.
		[ERROR] problems running TERp...
		java -Dfile.encoding=UTF-8 -jar  -Xmx1024M  /home/soft/asiya/tools/terp.v1/dist/lib/terp.jar    -n /home/usuaris/gilabert/PROVA_TER/AsiyaGPU/tmp/2624. -o nist -r /home/usuaris/gilabert/PROVA_TER/AsiyaGPU/tmp/2624.ref.TER.xml -h /home/usuaris/gilabert/PROVA_TER/AsiyaGPU/tmp/2624.out.TER.xml /home/soft/asiya/tools/terp.v1/data/ter.param
